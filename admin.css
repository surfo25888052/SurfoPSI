/* ===== 後台管理 Dashboard ===== */
.admin-layout {  display: flex;  min-height: 100vh;  background: #f5f5f5; }
.content-section { display: none; }
.content-section.active { display: block; }

/* 左側側邊欄 */
.sidebar {  width: 220px;  background: #2E7D32;  color: #fff;  display: flex;  flex-direction: column;  padding: 20px 0;  box-shadow: 2px 0 6px rgba(0,0,0,0.1); border-right: 2px solid white; }
.sidebar h2 {  font-size: 20px;  text-align: center;  margin-bottom: 24px;}
.sidebar a {  color: #fff;  padding: 12px 24px;  text-decoration: none;  display: block;  transition: background 0.2s;}
.sidebar a:hover,
.sidebar a.active {  background: #388E3C;}

/* 側邊欄 Logo 專用設定 */
.sidebar-logo {  justify-content: center;  padding: 0 12px 24px 12px;  border-bottom: 1px solid rgba(255,255,255,0.2); background: #2E7D32;}
.sidebar-logo .logo {  height: 48px;  display: block;}
.sidebar-logo .title {  font-size: 20px;  line-height: 1;  color: #fff;}
.logo-group { display: flex; border-bottom: 1px solid white; padding-bottom: 10px; margin-bottom: 15px; }

/* 右側主內容區 */
.admin-content {  flex: 1;  padding: 24px 32px;  background: #fafafa;}

/* ===== 內容切換 ===== */
.content-section {  display: none;  animation: fadeIn 0.3s ease-in-out;}
.content-section.active {  display: block;}
@keyframes fadeIn {  from { opacity: 0; transform: translateY(10px); }  to { opacity: 1; transform: translateY(0); }}

/* 頂部標題列 */
.admin-header {  display: flex;  justify-content: space-between;  align-items: center;  background: #fff;  padding: 16px 24px;  border-radius: 10px;  box-shadow: 0 2px 6px rgba(0,0,0,0.1);  margin-bottom: 24px;}
.admin-header h1 {  font-size: 22px;  color: #2E7D32;  margin: 0;}
.admin-header .user-info {  display: flex;  align-items: center;  gap: 12px;  font-size: 14px;}
.admin-header button {  background: #4CAF50;  border: none;  color: #fff;  padding: 8px 14px;  border-radius: 6px;  cursor: pointer;  transition: 0.2s;}
.admin-header button:hover {  background: #388E3C;  transform: translateY(-2px);}
.dashboard-cards {  display: grid;  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));  gap: 20px;}
.dashboard-card {  background: #fff;  border-radius: 12px;  padding: 16px;  box-shadow: 0 3px 8px rgba(0,0,0,0.1);  text-align: center;  transition: transform 0.2s;}
.dashboard-card:hover {  transform: translateY(-3px);}
.dashboard-card h3 {  color: #2E7D32;  font-size: 18px;  margin-bottom: 8px;}
.dashboard-card p {  color: #555;  font-size: 14px;}

/* 資料表格 */
.table-container {  margin-top: 30px;  background: #fff;  border-radius: 10px;  box-shadow: 0 3px 8px rgba(0,0,0,0.1);  overflow-x: auto;}
.admin-table {  width: 100%;  border-collapse: collapse;}
.admin-table th,
.admin-table td {  padding: 12px 16px;  text-align: left;  border-bottom: 1px solid #eee;}
.admin-table th {  background: #E8F5E9;  color: #2E7D32;  font-weight: bold;}
.admin-table tr:hover {  background: #f9f9f9;}

/* 按鈕樣式 */
.admin-btn {  background: #4CAF50;  color: #fff;  padding: 8px 14px;  border: none;  border-radius: 6px;  cursor: pointer;  transition: 0.2s;  font-size: 14px;}
.admin-btn:hover {  background: #388E3C;  transform: translateY(-2px);}

/* 響應式 */
@media (max-width: 768px) {  .admin-layout {    flex-direction: column;  }
  .sidebar {    width: 100%;    flex-direction: row;    overflow-x: auto;    justify-content: space-around;  }
  .admin-content {    margin-left: 0;    padding: 16px;  }
}

/* ===== Mobile Responsive (v11-safe) =====
   只做版面/觸控友善，不動任何 JS 商業邏輯，避免 v11 功能跑掉問題
*/
.icon-btn{
  display:none;
  border: 1px solid rgba(0,0,0,.12);
  background:#fff;
  border-radius:10px;
  padding: 8px 12px;
  font-size: 18px;
  line-height: 1;
  cursor: pointer;
}
.sidebar-overlay{ display:none; }

@media (max-width: 900px){
  /* Header */
  .icon-btn{ display:inline-flex; align-items:center; justify-content:center; }
  .admin-header{ gap: 10px; padding: 12px 14px; }
  .admin-header h1{ font-size: 18px; }
  .admin-header .user-info{ flex-wrap: wrap; justify-content:flex-end; gap: 8px; }

  /* Content */
  .admin-content{ padding: 12px; }
  .dashboard-cards{ grid-template-columns: 1fr !important; gap: 12px; }

  /* Off-canvas sidebar */
  .sidebar{
    position: fixed;
    top: 0; left: 0; bottom: 0;
    width: 82vw;
    max-width: 300px;
    transform: translateX(-110%);
    transition: transform .18s ease-out;
    z-index: 1001;
    padding-top: 14px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  .sidebar.open{ transform: translateX(0); }

  
  /* Sidebar menu items should stack vertically (mobile) */
  .sidebar{ display:flex; flex-direction: column; align-items: stretch; }
  .sidebar a{ display:block; width:100%; white-space: normal; }
  .sidebar .logo-group{ flex-direction: row; gap: 10px; align-items:center; }
.sidebar-overlay{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.35);
    z-index: 1000;
  }
  .sidebar-overlay.show{ display:block; }

  body.no-scroll{ overflow:hidden; }

  /* Toolbars & forms become vertical */
  .admin-toolbar{
    flex-direction: row !important;
    flex-wrap: wrap;
    align-items: center !important;
  }
  .admin-form{
    flex-direction: column !important;
    align-items: stretch !important;
  }

  /* 表單維持滿版；工具列維持橫排（可換行） */
  .admin-form .admin-input, .admin-form .admin-select, .admin-form input, .admin-form select, .admin-form textarea{
    width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box;
  }
  .admin-toolbar .admin-input, .admin-toolbar .admin-select, .admin-toolbar input, .admin-toolbar select{
    width: auto !important;
    min-width: 140px;
    flex: 1 1 160px;
    box-sizing: border-box;
  }
  .admin-toolbar .admin-btn, .admin-toolbar button{
    width: auto !important;
    flex: 0 0 auto;
  }
  .admin-btn, button{
    min-height: 42px;
  }

  /* Tables: allow horizontal swipe without breaking DOM */
  .admin-table{
    display:block;
    overflow-x:auto;
    -webkit-overflow-scrolling: touch;
    white-space: nowrap;
  }
  .admin-table th, .admin-table td{ padding: 10px 12px; }
  .row-actions button{ margin: 6px 8px 0 0; padding: 10px 12px; }
}

@media (max-width: 420px){
  .admin-header{ border-radius: 12px; }
  .dashboard-card{ border-radius: 14px; }
  .sidebar a{ padding: 12px 18px; }
}


/* ===== Image Modal ===== */
.img-modal{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 18px;
}
.img-modal.show{ display: flex; }

.img-modal-content{
  position: relative;
  width: min(920px, 96vw);
  max-height: 90vh;
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 18px 50px rgba(0,0,0,.25);
  padding: 14px 14px 16px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.img-modal-title{
  font-weight: 700;
  font-size: 16px;
  padding-right: 42px;
  word-break: break-word;
}
.img-modal-img{
  width: 100%;
  height: auto;
  max-height: calc(90vh - 86px);
  object-fit: contain;
  background: #f6f7f9;
  border-radius: 12px;
}
.img-modal-close{
  position: absolute;
  top: 10px;
  right: 10px;
  border: 1px solid rgba(0,0,0,.14);
  background: #fff;
  border-radius: 12px;
  padding: 8px 10px;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
}
.img-modal-close:active{ transform: scale(.98); }

@media (max-width: 420px){
  .img-modal{ padding: 12px; }
  .img-modal-content{ border-radius: 14px; padding: 12px; }
  .img-modal-img{ border-radius: 10px; }
}


/* ===== History Modal ===== */
.hist-modal{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2100;
  padding: 18px;
}
.hist-modal.show{ display:flex; }

.hist-modal-content{
  position: relative;
  width: min(980px, 96vw);
  max-height: 90vh;
  background:#fff;
  border-radius: 16px;
  box-shadow: 0 18px 50px rgba(0,0,0,.25);
  padding: 14px 14px 16px;
  overflow: hidden;
  display:flex;
  flex-direction: column;
  gap: 10px;
}
.hist-modal-title{
  font-weight: 800;
  font-size: 16px;
  padding-right: 42px;
  word-break: break-word;
}
.hist-modal-close{
  position:absolute;
  top:10px;
  right:10px;
  border: 1px solid rgba(0,0,0,.14);
  background:#fff;
  border-radius: 12px;
  padding: 8px 10px;
  cursor:pointer;
  font-size:16px;
  line-height:1;
}
.hist-toolbar{
  display:flex;
  align-items:center;
  gap: 10px;
  flex-wrap: wrap;
}
.hist-toolbar label{
  display:flex;
  align-items:center;
  gap: 6px;
}
.hist-toolbar input[type="date"]{
  padding: 8px 10px;
}
.hist-table-wrap{
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 12px;
}
.hist-table{ min-width: 720px; }

@media (max-width: 420px){
  .hist-modal{ padding: 12px; }
  .hist-modal-content{ border-radius: 14px; padding: 12px; }
}


/* ===== Purchase Layout (Stacked) ===== */
#purchase-section .two-col.stacked{
  display: flex;
  flex-direction: column;
  gap: 16px;
}
#purchase-section .two-col.stacked > div{
  width: 100%;
  background: #fff;
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 16px;
  padding: 14px;
  box-shadow: 0 10px 25px rgba(0,0,0,.06);
}
#purchase-section .two-col.stacked h3{
  margin-top: 0;
  margin-bottom: 10px;
}
#purchase-section .two-col.stacked .admin-toolbar{
  margin-top: 10px;
}

@media (max-width: 900px){
  #purchase-section .two-col.stacked > div{
    border-radius: 14px;
    padding: 12px;
  }
}

/* ===== Order & Pickup Layout (Stacked) ===== */
#order-section .two-col.stacked,
#pickup-section .two-col.stacked{
  display: flex;
  flex-direction: column;
  gap: 16px;
}
#order-section .two-col.stacked > div,
#pickup-section .two-col.stacked > div{
  width: 100%;
  background: #fff;
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 16px;
  padding: 14px;
  box-shadow: 0 10px 25px rgba(0,0,0,.06);
}
#order-section .two-col.stacked h3,
#pickup-section .two-col.stacked h3{
  margin-top: 0;
  margin-bottom: 10px;
}
#order-section .two-col.stacked .admin-toolbar,
#pickup-section .two-col.stacked .admin-toolbar{
  margin-top: 10px;
}
@media (max-width: 900px){
  #order-section .two-col.stacked > div,
  #pickup-section .two-col.stacked > div{
    border-radius: 14px;
    padding: 12px;
  }
}

/* ===== Pickup Cost Readonly ===== */
#pickup-section .pu-cost[readonly]{
  background: #f6f7f9;
  border-color: rgba(0,0,0,.08);
  pointer-events: none;
}

/* ===== Doc Modal (Purchase View) ===== */
.doc-modal{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2200;
  padding: 18px;
}
.doc-modal.show{ display:flex; }
.doc-modal-content{
  position: relative;
  width: min(980px, 96vw);
  max-height: 90vh;
  background:#fff;
  border-radius: 16px;
  box-shadow: 0 18px 50px rgba(0,0,0,.25);
  padding: 14px 14px 16px;
  overflow: hidden;
  display:flex;
  flex-direction: column;
  gap: 10px;
}
.doc-modal-title{
  font-weight: 800;
  font-size: 16px;
  padding-right: 42px;
  word-break: break-word;
}
.doc-modal-close{
  position:absolute;
  top:10px;
  right:10px;
  border: 1px solid rgba(0,0,0,.14);
  background:#fff;
  border-radius: 12px;
  padding: 8px 10px;
  cursor:pointer;
  font-size:16px;
  line-height:1;
}
.doc-modal-body{
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 12px;
  padding: 10px;
}
.doc-kv{
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 10px;
}
.doc-kv th, .doc-kv td{
  border: 1px solid rgba(0,0,0,.08);
  padding: 8px 10px;
  text-align:left;
  vertical-align: top;
  font-size: 14px;
}
.doc-kv th{ width: 90px; background: #f6f7f9; }
.doc-items{ min-width: 720px; }
@media (max-width: 420px){
  .doc-modal{ padding: 12px; }
  .doc-modal-content{ border-radius: 14px; padding: 12px; }
  .doc-kv th{ width: 72px; }
  .doc-items{ min-width: 620px; }
}


/* 商品主檔：卡片分區 + 表單格線 */
.admin-card{
  background: #fff;
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 12px;
  padding: 14px;
  margin-top: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,.04);
}
.card-title{
  font-weight: 700;
  margin-bottom: 10px;
  font-size: 15px;
}
.form-grid{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}
.field label{
  display:block;
  font-size: 12px;
  color: rgba(0,0,0,.65);
  margin-bottom: 4px;
}
.field.actions{
  display:flex;
  align-items: flex-end;
}
.field.actions .admin-btn{
  width: 100%;
}
.span-2{ grid-column: span 2; }
.table-wrap{ overflow-x:auto; }

.action-select{
  width: 100%;
  min-width: 110px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,.15);
  background: #fff;
}

/* 可讀性：多選供應商下拉稍微加高 */


.admin-btn.primary{
  background: #111;
  color: #fff;
  border: 1px solid #111;
}

/* 小螢幕 */
@media (max-width: 640px){
  .form-grid{ grid-template-columns: 1fr; }
  .span-2{ grid-column: span 1; }
  
}


.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;}


.checkbox-list{
  border: 1px solid rgba(0,0,0,.15);
  border-radius: 12px;
  padding: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px 10px;
  background: #fff;
  min-height: 44px;
}
.checkbox-list .chk{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,.12);
  background: rgba(0,0,0,.02);
  font-size: 13px;
}
.checkbox-list .chk input{
  transform: scale(1.05);
}
@media (max-width: 640px){
  .checkbox-list{ gap: 8px; }
  .checkbox-list .chk{ width: 100%; justify-content: flex-start; border-radius: 12px; }
}


/* 商品編輯 Modal 表單 */
.doc-modal-body{
  overflow: auto;
  padding-right: 2px;
}
.modal-actions{
  display:flex;
  gap: 10px;
  justify-content: flex-end;
  margin-top: 12px;
}
.modal-actions .admin-btn{
  min-width: 110px;
}
.readonly{
  background: rgba(0,0,0,.04);
}
