<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="images/favicon.ico" type="image/x-icon" />
  <title>é€²éŠ·å­˜ç³»çµ±ï½œç®¡ç†å¾Œå°</title>
  <link rel="stylesheet" href="admin.css" />
  <style>
    /* è£œé½Šå¾Œå°è¡¨å–®/å·¥å…·åˆ—æ¨£å¼ï¼ˆä¸ç ´å£åŸæœ¬ admin.cssï¼‰ */
    .admin-toolbar { display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin: 12px 0; }
    .admin-input, .admin-select { padding:8px 10px; border:1px solid #ddd; border-radius:8px; background:#fff; }
    .admin-input { min-width: 220px; }
    .admin-form { display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin: 12px 0; }
    .admin-form .admin-input, .admin-form .admin-select { min-width: 180px; }
    .hint { color:#666; font-size: 13px; margin-top: 6px; }
    .pill { display:inline-block; padding:2px 8px; border-radius: 999px; background:#E8F5E9; color:#2E7D32; font-size: 12px; }
    .danger { color:#B71C1C; }
    .muted { color:#888; }
    .row-actions button { margin-right: 6px; }
    .two-col { display:grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    @media (max-width: 900px) { .two-col { grid-template-columns: 1fr; } }
  </style>
</head>
<body>

  <div class="admin-layout">

    <!-- ===== å´é‚Šæ¬„ ===== -->
    <aside class="sidebar">
      <div class="logo-group sidebar-logo">
        <img src="images/logo.png" alt="LOGO" class="logo" />
        <h2 class="title">é€²éŠ·å­˜ç³»çµ±</h2>
      </div>

      <a href="#" class="active" data-target="dashboard-section">ğŸ  ç¸½è¦½</a>
      <a href="#" data-target="product-section">ğŸ“¦ å•†å“ä¸»æª”</a>
      <a href="#" data-target="purchase-section">â¬‡ï¸ é€²è²¨ç®¡ç†</a>
      <a href="#" data-target="order-section">â¬†ï¸ éŠ·è²¨ç®¡ç†</a>
      <a href="#" data-target="supplier-section">ğŸ­ ä¾›æ‡‰å•†ç®¡ç†</a>
      <a href="#" data-target="ledger-section">ğŸ“’ åº«å­˜æµæ°´</a>
      <a href="#" data-target="report-section">ğŸ“Š å ±è¡¨</a>
      <a href="#" data-target="setting-section">âš™ï¸ ç³»çµ±è¨­å®š</a>
    </aside>

    <!-- ===== å³å´ä¸»å…§å®¹ ===== -->
    <div class="admin-content">

      <header class="admin-header">
        <h1>å„€è¡¨æ¿</h1>
        <div class="user-info">
          <span id="adminUserName" class="muted">â€”</span>
          <button id="adminLogoutBtn" class="admin-btn">ç™»å‡º</button>
        </div>
      </header>

      <!-- ===== ç¸½è¦½ ===== -->
      <section id="dashboard-section" class="content-section active">
        <h2>ğŸ  ç¸½è¦½</h2>
        <div class="dashboard-cards">
          <div class="dashboard-card">
            <h3>ä»Šæ—¥éŠ·è²¨</h3>
            <p id="kpi-today-sales">â€”</p>
          </div>
          <div class="dashboard-card">
            <h3>ä»Šæ—¥é€²è²¨</h3>
            <p id="kpi-today-purchase">â€”</p>
          </div>
          <div class="dashboard-card">
            <h3>åº«å­˜å“é …</h3>
            <p id="kpi-sku-count">â€”</p>
          </div>
          <div class="dashboard-card">
            <h3>ä½åº«å­˜è­¦ç¤º</h3>
            <p id="kpi-low-stock">â€”</p>
          </div>
        </div>
        <p class="hint">æç¤ºï¼šè‹¥å¾Œç«¯ï¼ˆGAS / Google Sheetï¼‰å°šæœªåŠ å…¥é€²è²¨/æµæ°´ APIï¼Œæœ¬é æœƒä»¥ç€è¦½å™¨ localStorage åšç¤ºç¯„å„²å­˜ã€‚</p>
      </section>

      <!-- ===== å•†å“ä¸»æª” ===== -->
      <section id="product-section" class="content-section">
        <h2>ğŸ“¦ å•†å“ä¸»æª”</h2>

        <div class="admin-toolbar">
          <input type="text" id="searchInput" class="admin-input" placeholder="æœå°‹å•†å“ï¼ˆåç¨±ï¼‰" />
          <div id="category-filter" style="display:inline-block;"></div>
          <button id="reload-products" class="admin-btn">é‡æ–°è¼‰å…¥</button>
        </div>

        <div class="admin-form">
          <input type="text" id="new-name" class="admin-input" placeholder="å•†å“åç¨±" />
          <input type="number" id="new-price" class="admin-input" placeholder="å”®åƒ¹" />
          <input type="number" id="new-cost" class="admin-input" placeholder="é€²åƒ¹(æˆæœ¬)" />
          <input type="number" id="new-stock" class="admin-input" placeholder="åº«å­˜" />
          <input type="number" id="new-safety" class="admin-input" placeholder="å®‰å…¨åº«å­˜" />
          <input type="text" id="new-unit" class="admin-input" placeholder="å–®ä½(ä¾‹: kg/ç›’/åŒ…)" />
          <input type="text" id="new-category" class="admin-input" placeholder="åˆ†é¡" />
          <button id="add-product-btn" class="admin-btn">æ–°å¢å•†å“</button>
        </div>

        <table class="admin-table" id="admin-product-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>å•†å“åç¨±</th>
              <th>å”®åƒ¹</th>
              <th>é€²åƒ¹</th>
              <th>åº«å­˜</th>
              <th>å®‰å…¨åº«å­˜</th>
              <th>åˆ†é¡</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div id="pagination" style="margin-top:12px;"></div>
      </section>

      <!-- ===== é€²è²¨ç®¡ç† ===== -->
      <section id="purchase-section" class="content-section">
        <h2>â¬‡ï¸ é€²è²¨ç®¡ç†</h2>

        <div class="two-col">
          <div>
            <h3>æ–°å¢é€²è²¨å–® <span class="pill">å…¥åº«</span></h3>

            <div class="admin-form">
              <input type="date" id="po-date" class="admin-input" />
              <select id="po-supplier" class="admin-select"></select>
              <button id="po-add-supplier" class="admin-btn">+ ä¾›æ‡‰å•†</button>
            </div>

            <table class="admin-table" id="po-items-table">
              <thead>
                <tr>
                  <th>å•†å“</th>
                  <th>æ•¸é‡</th>
                  <th>å–®åƒ¹(æˆæœ¬)</th>
                  <th>å°è¨ˆ</th>
                  <th>æ“ä½œ</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>

            <div class="admin-toolbar">
              <button id="po-add-row" class="admin-btn">+ æ–°å¢å“é …</button>
              <span style="margin-left:auto; font-weight:bold;">åˆè¨ˆï¼š<span id="po-total">0</span></span>
              <button id="po-submit" class="admin-btn">å„²å­˜é€²è²¨</button>
            </div>
            <p class="hint">å„²å­˜å¾Œæœƒè‡ªå‹•å¢åŠ åº«å­˜ï¼Œä¸¦å¯«å…¥ã€Œåº«å­˜æµæ°´ã€ã€‚</p>
          </div>

          <div>
            <h3>é€²è²¨å–®åˆ—è¡¨</h3>
            <div class="admin-toolbar">
              <input type="text" id="po-search" class="admin-input" placeholder="æœå°‹ï¼ˆå–®è™Ÿ/ä¾›æ‡‰å•†ï¼‰" />
              <button id="po-reload" class="admin-btn">é‡æ–°è¼‰å…¥</button>
            </div>
            <table class="admin-table" id="po-table">
              <thead>
                <tr>
                  <th>é€²è²¨å–®è™Ÿ</th>
                  <th>æ—¥æœŸ</th>
                  <th>ä¾›æ‡‰å•†</th>
                  <th>é‡‘é¡</th>
                  <th>æ“ä½œ</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div id="po-pagination" style="margin-top:12px;"></div>
          </div>
        </div>
      </section>

      <!-- ===== éŠ·è²¨ç®¡ç†ï¼ˆæ²¿ç”¨è¨‚å–®ï¼‰ ===== -->
      <section id="order-section" class="content-section">
        <h2>â¬†ï¸ éŠ·è²¨ç®¡ç†</h2>

        <div class="admin-toolbar">
          <input type="text" id="order-search" class="admin-input" placeholder="æœå°‹ï¼ˆå§“åã€é›»è©±ã€è¨‚å–®ç·¨è™Ÿï¼‰" />
          <select id="status-filter" class="admin-select">
            <option value="">å…¨éƒ¨ç‹€æ…‹</option>
            <option value="å¾…å‡ºè²¨">å¾…å‡ºè²¨</option>
            <option value="å·²å‡ºè²¨">å·²å‡ºè²¨</option>
            <option value="å·²å®Œæˆ">å·²å®Œæˆ</option>
            <option value="å·²å–æ¶ˆ">å·²å–æ¶ˆ</option>
          </select>
          <button id="reload-orders" class="admin-btn">é‡æ–°è¼‰å…¥</button>
        </div>

        <table id="admin-order-table" class="admin-table">
          <thead>
            <tr>
              <th>è¨‚å–®ç·¨è™Ÿ</th>
              <th>æ—¥æœŸ</th>
              <th>å®¢æˆ¶</th>
              <th>é›»è©±</th>
              <th>é‡‘é¡</th>
              <th>æ˜ç´°</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <div id="order-pagination" class="pagination" style="margin-top:12px;"></div>
        <p class="hint">è‹¥ä½ ä¸éœ€è¦å°å¤–å•†åŸï¼Œå¯ä¿ç•™æ­¤å€ä½œç‚ºã€ŒéŠ·è²¨å–®ã€ç®¡ç†ï¼ˆç”±é–€å¸‚/æ¥­å‹™é–‹å–®ï¼‰ã€‚</p>
      </section>

      <!-- ===== ä¾›æ‡‰å•†ç®¡ç† ===== -->
      <section id="supplier-section" class="content-section">
        <h2>ğŸ­ ä¾›æ‡‰å•†ç®¡ç†</h2>

        <div class="admin-form">
          <input type="text" id="sup-name" class="admin-input" placeholder="ä¾›æ‡‰å•†åç¨±" />
          <input type="text" id="sup-phone" class="admin-input" placeholder="é›»è©±" />
          <input type="text" id="sup-address" class="admin-input" placeholder="åœ°å€" />
          <button id="sup-add" class="admin-btn">æ–°å¢ä¾›æ‡‰å•†</button>
        </div>

        <table class="admin-table" id="supplier-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>ä¾›æ‡‰å•†åç¨±</th>
              <th>é›»è©±</th>
              <th>åœ°å€</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div id="supplier-pagination" style="margin-top:12px;"></div>
      </section>

      <!-- ===== åº«å­˜æµæ°´ ===== -->
      <section id="ledger-section" class="content-section">
        <h2>ğŸ“’ åº«å­˜æµæ°´</h2>

        <div class="admin-toolbar">
          <select id="ledger-type" class="admin-select">
            <option value="">å…¨éƒ¨é¡å‹</option>
            <option value="IN">é€²è²¨(IN)</option>
            <option value="OUT">éŠ·è²¨(OUT)</option>
            <option value="ADJ">èª¿æ•´(ADJ)</option>
          </select>
          <input type="text" id="ledger-search" class="admin-input" placeholder="æœå°‹ï¼ˆå•†å“/å–®è™Ÿï¼‰" />
          <button id="ledger-reload" class="admin-btn">é‡æ–°è¼‰å…¥</button>
        </div>

        <table class="admin-table" id="ledger-table">
          <thead>
            <tr>
              <th>æ™‚é–“</th>
              <th>é¡å‹</th>
              <th>åƒè€ƒå–®è™Ÿ</th>
              <th>å•†å“</th>
              <th>æ•¸é‡</th>
              <th>æˆæœ¬</th>
              <th>å‚™è¨»</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div id="ledger-pagination" style="margin-top:12px;"></div>
      </section>

      <!-- ===== å ±è¡¨ ===== -->
      <section id="report-section" class="content-section">
        <h2>ğŸ“Š å ±è¡¨</h2>

        <div class="admin-toolbar">
          <input type="date" id="report-from" class="admin-input" />
          <input type="date" id="report-to" class="admin-input" />
          <button id="report-run" class="admin-btn">ç”¢ç”Ÿå ±è¡¨</button>
        </div>

        <div class="dashboard-cards">
          <div class="dashboard-card"><h3>æœŸé–“éŠ·å”®é¡</h3><p id="rep-sales">â€”</p></div>
          <div class="dashboard-card"><h3>æœŸé–“é€²è²¨é¡</h3><p id="rep-purchase">â€”</p></div>
          <div class="dashboard-card"><h3>æœŸé–“æ¯›åˆ©(ä¼°ç®—)</h3><p id="rep-profit">â€”</p></div>
          <div class="dashboard-card"><h3>åº«å­˜ç¸½æ•¸</h3><p id="rep-stock">â€”</p></div>
        </div>

        <p class="hint">æ¯›åˆ©ä¼°ç®—ï¼šä»¥éŠ·å”®å–®åƒ¹ - é€²è²¨æˆæœ¬ï¼ˆå•†å“ä¸»æª”æˆæœ¬ï¼‰è¨ˆç®—ï¼›å¦‚éœ€æ›´ç²¾æº–ï¼Œå¯æ”¹ç‚º FIFO/åŠ æ¬Šå¹³å‡æˆæœ¬ã€‚</p>
      </section>

      <!-- ===== ç³»çµ±è¨­å®š ===== -->
      <section id="setting-section" class="content-section">
        <h2>âš™ï¸ ç³»çµ±è¨­å®š</h2>
        <p class="hint">ç›®å‰å¾Œå°ä½¿ç”¨ Google Apps Scriptï¼ˆJSONPï¼‰ä½œç‚º APIï¼›å¯åœ¨ <code>config.js</code> ä¿®æ”¹ SHEET_APIã€‚</p>
        <p class="hint">è‹¥ä½ è¦çœŸæ­£ã€Œé€²éŠ·å­˜ã€ï¼šå»ºè­°åœ¨ Google Sheet å»ºç«‹è³‡æ–™è¡¨ï¼šproducts / suppliers / purchases / orders / stock_ledgerã€‚</p>
      </section>

    </div>
  </div>

  <script src="config.js"></script>
  <script src="member.js"></script>
  <script src="admin.js"></script>
</body>
</html>
